<!-- ============================================= -->
<!-- K-AI Chatbot -->
<div id="kai-chat-widget">
    <div id="kai-button">ðŸ’¬</div>
    <div id="kai-chatbox">
        <div id="kai-header">
            <span>K-AI Assistente</span>
            <button id="kai-close">Ã—</button>
        </div>
        <div id="kai-messages"></div>
        <div id="kai-input-container">
            <input type="text" id="kai-input" placeholder="Digite sua pergunta..." />
            <button id="kai-send">Enviar</button>
        </div>
    </div>
</div>

<style>
    /* ===== K-AI Chatbot ===== */
    #kai-chat-widget {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 9999;
        font-family: 'Roboto', sans-serif;
    }

    #kai-button {
        background-color: #ff6b00;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        font-size: 28px;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        transition: transform 0.2s;
    }

    #kai-button:hover {
        transform: scale(1.1);
    }

    #kai-chatbox {
        display: none;
        width: 320px;
        max-height: 400px;
        background-color: #1a1a1a;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        overflow: hidden;
        flex-direction: column;
    }

    #kai-header {
        background-color: #ff6b00;
        color: #fff;
        padding: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: bold;
    }

    #kai-messages {
        padding: 10px;
        height: 250px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 10px;
        background-color: #0f0f0f;
    }

    .kai-message {
        background-color: #333;
        padding: 8px 12px;
        border-radius: 10px;
        max-width: 80%;
    }

    .kai-message.user {
        background-color: #ff6b00;
        color: #fff;
        align-self: flex-end;
    }

    .kai-message.kai {
        background-color: #1f1f1f;
        color: #fff;
        align-self: flex-start;
    }

    #kai-input-container {
        display: flex;
        border-top: 1px solid #333;
    }

    #kai-input {
        flex: 1;
        padding: 10px;
        border: none;
        border-radius: 0;
        outline: none;
        background-color: #111;
        color: #fff;
    }

    #kai-send {
        padding: 10px;
        background-color: #ff6b00;
        border: none;
        color: #fff;
        cursor: pointer;
        font-weight: bold;
    }

    #kai-close {
        background: none;
        border: none;
        color: #fff;
        font-size: 20px;
        cursor: pointer;
    }
</style>

<script>
    // ===== K-AI Chatbot Funcionalidade =====
    const kaiButton = document.getElementById("kai-button");
    const kaiChatbox = document.getElementById("kai-chatbox");
    const kaiClose = document.getElementById("kai-close");
    const kaiSend = document.getElementById("kai-send");
    const kaiInput = document.getElementById("kai-input");
    const kaiMessages = document.getElementById("kai-messages");

    // Abrir/Fechar chatbot
    kaiButton.addEventListener("click", () => {
        kaiChatbox.style.display = kaiChatbox.style.display === "flex" ? "none" : "flex";
        kaiChatbox.style.flexDirection = "column";
    });

    kaiClose.addEventListener("click", () => {
        kaiChatbox.style.display = "none";
    });

    // FunÃ§Ã£o para adicionar mensagens
    function addMessage(text, sender) {
        const div = document.createElement("div");
        div.classList.add("kai-message", sender);
        div.textContent = text;
        kaiMessages.appendChild(div);
        kaiMessages.scrollTop = kaiMessages.scrollHeight;
    }

    // FunÃ§Ã£o para falar
    function speak(text) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'pt-BR';
        utterance.voice = speechSynthesis.getVoices().find(v => v.name.includes("Male") || v.name.includes("Masculino")) || speechSynthesis.getVoices()[0];
        utterance.pitch = 1;
        utterance.rate = 1;
        speechSynthesis.speak(utterance);
    }

    // Respostas automÃ¡ticas K-AI
    function kaiResponse(userText) {
        userText = userText.toLowerCase();
        let response = "Desculpe, nÃ£o entendi. Pergunte sobre produtos, carrinho, frete ou checkout.";

        if (userText.includes("produtos") || userText.includes("loja")) {
            response = "Na K-Store vocÃª encontra diversos produtos KORVIL. Navegue pela pÃ¡gina principal para ver todos!";
        } else if (userText.includes("carrinho")) {
            response = `VocÃª pode adicionar produtos ao carrinho clicando em "Adicionar ao Carrinho". O total Ã© mostrado no final do carrinho.`;
        } else if (userText.includes("frete") || userText.includes("cep")) {
            response = "Para calcular o frete, digite seu CEP no campo 'Calcular Frete' e clique no botÃ£o.";
        } else if (userText.includes("checkout") || userText.includes("comprar")) {
            response = "Para finalizar a compra, preencha seus dados no formulÃ¡rio do cliente e clique em 'Finalizar Compra'.";
        } else if (userText.includes("oi") || userText.includes("olÃ¡")) {
            response = "OlÃ¡! Eu sou o K-AI, seu assistente virtual. Posso te ajudar a navegar pela K-Store!";
        }

        addMessage(response, "kai");
        speak(response);
    }

    // Enviar mensagem
    kaiSend.addEventListener("click", () => {
        const text = kaiInput.value.trim();
        if (!text) return;
        addMessage(text, "user");
        kaiResponse(text);
        kaiInput.value = "";
    });

    // Enviar mensagem com Enter
    kaiInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
            kaiSend.click();
        }
    });
</script>        kaiResponse(text);
        kaiInput.value = "";
    });

    // Enviar mensagem com Enter
    kaiInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
            kaiSend.click();
        }
    });
</script>
